<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
<title>Data model &ndash; jqt · the jq template engine</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="jqt v0.1.0"/>
<meta name='author' content='Joan Josep Ordinas Rosa' />
<meta name='dcterms.modified' content='2016-08-13T07:48:26Z' />
<link rel="stylesheet" type="text/css" href="jqt.css"/>



  </head>

  <body>
    <ul id="MENU">
      <li class="logo"><a href="https://fadado.github.com/jqt/">❴❴❏❵❵</a><span>v0.1.0</span></li>
<li><a  href="./index.html">Home</a></li>
<li><a  href="./engine.html">Engine</a></li>
<li><a  href="./document.html">Document</a></li>
<li><a  href="./template.html">Template</a></li>
<li><a class='current' href="./metadata.html">Metadata</a></li>
    </ul>

<h1>Data model &ndash; <em>jqt</em> · the <em>jq</em> template engine</h1>
    <div id="BODY">
  <div id="TOC">
    <p>Table of contents</p>
    
<ul>
<li><a href="#general-operation">General operation</a></li>
<li><a href="#data-xxxxxx">Data XXXXXX</a><ul>
<li><a href="#preprocessing">Preprocessing</a><ul>
<li><a href="#syntax-of-macros">Syntax of macros</a></li>
<li><a href="#skips">Skips</a></li>
</ul></li>
</ul></li>
<li><a href="#other-utilities">Other utilities</a><ul>
<li><a href="#format-conversion">Format conversion</a></li>
<li><a href="#querying-yaml-and-csv">Querying YAML and CSV</a></li>
</ul></li>
</ul>

  </div>
  <div id="CONTENT">
    <h2 id="general-operation">General operation</h2>
<p><em>jqt</em> will</p>
<p>Metadata in YAML and JSON formats</p>
<p>This is described on the bottom of this diagram:</p>
<pre><code>           jqt        +------+   +-------+  jq script
Template +-----------&gt;|expand|--&gt;|convert|-------------------------------+
                      +------+   +-------+                               |
                                                                         |
                                               HTML and CSS              | 
                                               fragments                 v
           MarkDown   +------+   +------+   /--------&gt;+-----+  JSON   +------+
Document +-----------&gt;|expand|--&gt;|markup|--+          |merge|--------&gt;|render|--&gt; HTML
                      +------+   +------+   \--------&gt;+-----+         +------+
                                               YAML    ^   ^
                                          front-matter |   |
                                                       |   |
           JSON       +------+                         |   |
         +-----------&gt;|expand|-------------------------+   |
Metadata              +------+                             |
         +-------------------------------------------------+
           YAML   </code></pre>
<p>You can pass the following options to <code>jqt</code> to modify metadata evaluation:</p>
<dl>
<dt>-D NAME=VAL</dt>
<dd>Define the user macro <em>NAME</em> as equal to <em>VAL</em>.
</dd>
<dt>-f NAME</dt>
<dd>Set name for YAML document metadata (defaults to 'front').
</dd>
<dt>-I DIRECTORY</dt>
<dd>Append <em>DIRECTORY</em> to the end of the preprocessor list of directories to be searched for include files.
</dd>
<dt>-M NAME:FILE</dt>
<dd>Add a <em>FILE</em> in YAML or JSON format to the input metadata at the top level (<em>NAME</em> is ignored but must be present and unique).
</dd>
<dt>-m NAME:FILE</dt>
<dd>Add a <em>FILE</em> in YAML or JSON format to the input metadata as a value of object <em>NAME</em>.
</dd>
</dl>
<h2 id="data-xxxxxx">Data XXXXXX</h2>
<h3 id="preprocessing">Preprocessing</h3>
<p>The JSON input content is preprocessed using <a href="https://logological.org/gpp">GPP</a>. All the expected options are available, like defining new macros, include other files, etc. YAML input is not preprocessed.</p>
<p>The main preprocessor use to remove comments in the CPP style.</p>
<h4 id="syntax-of-macros">Syntax of macros</h4>
<p>Macro definition:</p>
<pre><code>&lt;!define X X&gt;&amp;</code></pre>
<pre><code>Continuation lines using backslash (removed with the newline character)\</code></pre>
<p>Macro call examples:</p>
<pre><code>...</code></pre>
<h4 id="skips">Skips</h4>
<p>JSON input is preprocessed like MarkDown input, but the skips available are no the same. This table summarize all the skips available:</p>
<table>
<caption><strong>Semantics for all JSON skips</strong></caption>
<thead>
<tr class="header">
<th align="center">Delimiters</th>
<th align="left">Place</th>
<th align="left">Macro expansion</th>
<th align="left">Delimiters removed</th>
<th align="left">Content removed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>\\n</code><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></td>
<td align="left">Text</td>
<td align="left">No</td>
<td align="left">Yes</td>
<td align="left">There is no content</td>
</tr>
<tr class="even">
<td align="center"><code>/*</code> <code>*/</code></td>
<td align="left">Text</td>
<td align="left">No</td>
<td align="left">Yes</td>
<td align="left">Yes</td>
</tr>
<tr class="odd">
<td align="center"><code>//</code> <code>\n</code><a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></td>
<td align="left">Text</td>
<td align="left">No</td>
<td align="left">Yes</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="center"><code>&quot;</code> <code>&quot;</code></td>
<td align="left">Text</td>
<td align="left">Yes</td>
<td align="left">No</td>
<td align="left">No</td>
</tr>
</tbody>
</table>
<h2 id="other-utilities">Other utilities</h2>
<p>When preparing metadata sometimes you need to mix files in several formats, or you want to apply to YAML input queries in the <em>jq</em> style.</p>
<h3 id="format-conversion">Format conversion</h3>
<p>To make easy integrate metadata from several sources <em>jqt</em> comes with the following utilities to convert between CSV, JSON and YAML formats:</p>
<ul>
<li><code>csv2json</code></li>
<li><code>csv2yaml</code></li>
<li><code>json2csv</code></li>
<li><code>json2yaml</code></li>
<li><code>yaml2csv</code></li>
<li><code>yaml2json</code></li>
</ul>
<p>The utilities are filters that read standard input or a file passed as an argument and write to standard output.</p>
<h3 id="querying-yaml-and-csv">Querying YAML and CSV</h3>
<p>Also, sometimes you want to apply queries in the <em>jq</em> style to CSV or YAML files. As a wrappers to <code>jq</code> you have the following utilities shipped with <em>jqt</em>:</p>
<ul>
<li><code>cq</code></li>
<li><code>yq</code></li>
</ul>
<p>These utilities imitate at maximum the <code>jq</code> command line interface, for example not requiring redirection of input:</p>
<pre><code>$ yq &#39;.store.book[2]&#39; tests/data/store.yaml
---
author: Herman Melville
category: fiction
isbn: 0-553-21311-3
price: 8.99
title: Moby Dick
...</code></pre>
<p>You can also ask for JSON output:</p>
<pre><code>$ yq --json -c &#39;.store.book[2]&#39; tests/data/store.yaml
{&quot;category&quot;:&quot;fiction&quot;,&quot;price&quot;:8.99,&quot;author&quot;:&quot;Herman Melville&quot;,...</code></pre>
<p>Read the output of <code>yq --help</code> for more information.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>A backslash followed by a newline is treated as a line continuation (that is, the backslash and the newline are removed and effectively ignored).<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>This represents a newline character.<a href="#fnref2">↩</a></p></li>
</ol>
</div>

  </div>    </div>

    <div id="FOOTER">
<div style="text-align:center;">
  <hr /> <p>This website is made with <a href="https://fadado.github.io/jqt/"><em>jqt</em></a>.<br /><em>jqt</em> is licensed under the MIT license (code) and the <a href="https://creativecommons.org/licenses/by/3.0/">CC-BY-3.0</a> license (documents).</p>

</div>
<div class="github">
  ❲ <a href="https://github.com/fadado/jqt">code</a> ❘
    <a href="https://github.com/fadado/jqt/issues">issues</a> ❘
    <a href="https://github.com/fadado/jqt/wiki">wiki</a> ❘
    <a href="https://github.com/fadado/jqt/releases">releases</a>
  ❳</div>

    </div>

<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-82432866-1', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>

